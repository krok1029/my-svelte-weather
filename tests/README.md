# My Svelte Weather æ¸¬è©¦å¥—ä»¶

é€™å€‹ç›®éŒ„åŒ…å«äº† My Svelte Weather æ‡‰ç”¨ç¨‹å¼çš„å®Œæ•´ Playwright ç«¯åˆ°ç«¯æ¸¬è©¦å¥—ä»¶ã€‚

## æ¸¬è©¦æª”æ¡ˆçµæ§‹

```
tests/
â”œâ”€â”€ test.ts              # ä¸»è¦ UI å’ŒåŸºæœ¬åŠŸèƒ½æ¸¬è©¦
â”œâ”€â”€ weather-card.test.ts # å¤©æ°£å¡ç‰‡åŠŸèƒ½æ¸¬è©¦
â”œâ”€â”€ map.test.ts          # åœ°åœ–åŠŸèƒ½æ¸¬è©¦
â”œâ”€â”€ api.test.ts          # API å’Œè³‡æ–™è¼‰å…¥æ¸¬è©¦
â””â”€â”€ README.md           # æœ¬èªªæ˜æª”æ¡ˆ
```

## æ¸¬è©¦æ¶µè“‹ç¯„åœ

### ğŸ¨ åŸºæœ¬ UI æ¸¬è©¦ (`test.ts`)
- é¦–é æ¨™é¡Œé¡¯ç¤º
- åŸºæœ¬ UI å…ƒç´ è¼‰å…¥
- ç¸£å¸‚æŒ‰éˆ•åŠŸèƒ½
- å¤©æ°£è³‡è¨Šé¡¯ç¤º
- éŸ¿æ‡‰å¼è¨­è¨ˆ
- éŒ¯èª¤è™•ç†
- å¤šç¸£å¸‚åˆ‡æ›

### ğŸŒ¦ï¸ å¤©æ°£å¡ç‰‡æ¸¬è©¦ (`weather-card.test.ts`)
- å¤©æ°£å¡ç‰‡é¡¯ç¤º
- 36å°æ™‚é å ±è³‡æ–™å®Œæ•´æ€§
- ä¸åŒç¸£å¸‚è³‡æ–™åˆ‡æ›

### ğŸ—ºï¸ åœ°åœ–åŠŸèƒ½æ¸¬è©¦ (`map.test.ts`)
- Leaflet åœ°åœ–åˆå§‹åŒ–
- åœ°åœ–èˆ‡ç¸£å¸‚æŒ‰éˆ•äº’å‹•
- éŸ¿æ‡‰å¼åœ°åœ–è¨­è¨ˆ
- åœ°åœ–è¼‰å…¥éŒ¯èª¤è™•ç†
- åœ°åœ–èˆ‡å¤©æ°£è³‡æ–™åŒæ­¥

### ğŸ”Œ API å’Œè³‡æ–™æ¸¬è©¦ (`api.test.ts`)
- å¤©æ°£ API è³‡æ–™è¼‰å…¥
- éœæ…‹è³‡æºè¼‰å…¥
- è³‡æ–™è¼‰å…¥å¤±æ•—è™•ç†
- ç¶²è·¯é€£ç·šç·©æ…¢è™•ç†
- API Token ç’°å¢ƒè®Šæ•¸æª¢æŸ¥
- ç¸£å¸‚è³‡æ–™å®Œæ•´æ€§
- å¤©æ°£è³‡æ–™æ ¼å¼é©—è­‰

## é‹è¡Œæ¸¬è©¦

### ä½¿ç”¨ npm/yarn è…³æœ¬

```bash
# é‹è¡Œæ‰€æœ‰æ¸¬è©¦
yarn test:integration

# é‹è¡Œç‰¹å®šæ¸¬è©¦æª”æ¡ˆ
yarn test:ui          # åŸºæœ¬ UI æ¸¬è©¦
yarn test:weather     # å¤©æ°£å¡ç‰‡æ¸¬è©¦
yarn test:map         # åœ°åœ–åŠŸèƒ½æ¸¬è©¦
yarn test:api         # API æ¸¬è©¦

# å¯è¦–åŒ–æ¸¬è©¦ï¼ˆé–‹å•Ÿç€è¦½å™¨ï¼‰
yarn test:headed

# é™¤éŒ¯æ¨¡å¼
yarn test:debug

# æŸ¥çœ‹æ¸¬è©¦å ±å‘Š
yarn test:report

# å®‰è£ Playwright ç€è¦½å™¨
yarn test:install
```

### ä½¿ç”¨æ¸¬è©¦è…³æœ¬

```bash
# ä½¿ç”¨ä¾¿åˆ©è…³æœ¬
./scripts/test.sh all      # æ‰€æœ‰æ¸¬è©¦
./scripts/test.sh ui       # UI æ¸¬è©¦
./scripts/test.sh weather  # å¤©æ°£æ¸¬è©¦
./scripts/test.sh map      # åœ°åœ–æ¸¬è©¦
./scripts/test.sh api      # API æ¸¬è©¦
./scripts/test.sh headed   # å¯è¦–åŒ–æ¸¬è©¦
./scripts/test.sh debug    # é™¤éŒ¯æ¨¡å¼
./scripts/test.sh report   # æŸ¥çœ‹å ±å‘Š
```

### ç›´æ¥ä½¿ç”¨ Playwright

```bash
# é‹è¡Œæ‰€æœ‰æ¸¬è©¦
npx playwright test

# é‹è¡Œç‰¹å®šæ¸¬è©¦æª”æ¡ˆ
npx playwright test test.ts
npx playwright test weather-card.test.ts

# é‹è¡Œç‰¹å®šæ¸¬è©¦æ¡ˆä¾‹
npx playwright test --grep "é¦–é é¡¯ç¤ºå¤©æ°£é å ±æ¨™é¡Œ"

# å¯è¦–åŒ–æ¨¡å¼
npx playwright test --headed

# é™¤éŒ¯æ¨¡å¼
npx playwright test --debug

# ç”¢ç”Ÿæ¸¬è©¦å ±å‘Š
npx playwright show-report
```

## æ¸¬è©¦é…ç½®

æ¸¬è©¦é…ç½®ä½æ–¼ `playwright.config.ts`ï¼ŒåŒ…å«ï¼š

- **å¤šç€è¦½å™¨æ”¯æ´**: Chrome, Firefox, Safari
- **è¡Œå‹•è£ç½®æ¸¬è©¦**: Pixel 5, iPhone 12
- **è‡ªå‹•é‡è©¦**: CI ç’°å¢ƒé‡è©¦ 2 æ¬¡
- **æˆªåœ–å’Œå½±ç‰‡**: å¤±æ•—æ™‚è‡ªå‹•è¨˜éŒ„
- **æ¸¬è©¦å ±å‘Š**: HTML, åˆ—è¡¨, JUnit æ ¼å¼

## ç’°å¢ƒéœ€æ±‚

1. **Node.js**: ç‰ˆæœ¬ 16 æˆ–ä»¥ä¸Š
2. **Playwright ç€è¦½å™¨**: é‹è¡Œ `yarn test:install` å®‰è£
3. **é–‹ç™¼ä¼ºæœå™¨**: æ¸¬è©¦æœƒè‡ªå‹•å•Ÿå‹• preview ä¼ºæœå™¨
4. **ç’°å¢ƒè®Šæ•¸**: ç¢ºä¿ `.env` æª”æ¡ˆåŒ…å«å¿…è¦çš„ API Token

## æ¸¬è©¦æœ€ä½³å¯¦è¸

### âœ… å¥½çš„åšæ³•
- ä½¿ç”¨æœ‰æ„ç¾©çš„æ¸¬è©¦åç¨±
- é©ç•¶çš„ç­‰å¾…æ™‚é–“å’Œè¶…æ™‚è¨­å®š
- æª¢æŸ¥å¤šç¨®ç€è¦½å™¨å’Œè£ç½®
- æ¸¬è©¦éŒ¯èª¤æƒ…æ³å’Œé‚Šç•Œæ¢ä»¶

### âŒ é¿å…çš„åšæ³•
- ç¡¬ç·¨ç¢¼çš„ç­‰å¾…æ™‚é–“
- ä¾è³´ç‰¹å®šçš„æ¸¬è©¦é †åº
- å¿½ç•¥éåŒæ­¥æ“ä½œ
- éåº¦ä¾è³´ CSS é¸æ“‡å™¨

## æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

1. **æ¸¬è©¦è¶…æ™‚**
   - æª¢æŸ¥ç¶²è·¯é€£ç·š
   - ç¢ºèª API Token è¨­å®šæ­£ç¢º
   - å¢åŠ è¶…æ™‚æ™‚é–“

2. **å…ƒç´ æ‰¾ä¸åˆ°**
   - æª¢æŸ¥é¸æ“‡å™¨æ˜¯å¦æ­£ç¢º
   - ç¢ºèªå…ƒç´ è¼‰å…¥æ™‚é–“
   - ä½¿ç”¨ `--headed` æ¨¡å¼é™¤éŒ¯

3. **API ç›¸é—œéŒ¯èª¤**
   - æª¢æŸ¥ `.env` æª”æ¡ˆ
   - ç¢ºèª API Token æœ‰æ•ˆ
   - æª¢æŸ¥ç¶²è·¯é€£ç·š

### é™¤éŒ¯æŠ€å·§

```bash
# ä½¿ç”¨é™¤éŒ¯æ¨¡å¼
npx playwright test --debug

# ç”¢ç”Ÿ trace æª”æ¡ˆ
npx playwright test --trace on

# æŸ¥çœ‹æ¸¬è©¦åŸ·è¡Œéç¨‹
npx playwright test --headed --slowMo=1000
```

## æŒçºŒæ•´åˆ

é€™äº›æ¸¬è©¦å¯ä»¥æ•´åˆåˆ° CI/CD æµç¨‹ä¸­ï¼š

```yaml
# GitHub Actions ç¯„ä¾‹
- name: Run Playwright tests
  run: |
    yarn install
    yarn test:install
    yarn test:integration
```

## è²¢ç»æŒ‡å—

æ–°å¢æ¸¬è©¦æ™‚è«‹éµå¾ªï¼š

1. ä½¿ç”¨æè¿°æ€§çš„æ¸¬è©¦åç¨±
2. é©ç•¶çš„ `describe` ç¾¤çµ„
3. æ¸…ç†æ¸¬è©¦è³‡æ–™
4. æ·»åŠ é©ç•¶çš„è¨»è§£
5. æ›´æ–°æ­¤ README æª”æ¡ˆ
